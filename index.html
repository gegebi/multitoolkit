<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multitoolkit: 복리 계산기 및 팀 편성기</title>
    <meta name="description" content="복리 계산, 랜덤 팀 생성 등 다양한 웹 도구를 제공하는 멀티툴킷입니다. 생활에 유용한 웹 도구들을 만나보세요.">
    <link rel="icon" href="logo.svg" type="image/svg+xml">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .reveal-overlay { transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease; }
        .reveal-overlay.hidden-box { transform: translateY(-100%); opacity: 0; pointer-events: none; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
    
    <meta name="google-adsense-account" content="ca-pub-5343711032223493">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5343711032223493" crossorigin="anonymous"></script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Multitoolkit",
      "url": "https://gegebi.github.io/multitoolkit/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://gegebi.github.io/multitoolkit/",
        "query-input": "required name=search_term_string"
      },
      "creator": {
        "@type": "Person",
        "name": "gegebi"
      }
    }
    </script>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // 아이콘 컴포넌트
        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} className={className} style={{ width: size, height: size }} aria-hidden="true"></i>;
        };

        // 토스트 메시지 컴포넌트
        const Toast = ({ message, visible }) => (
            <div role="alert" aria-live="assertive" className={`fixed bottom-8 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-6 py-3 rounded-full shadow-2xl transition-all duration-300 z-50 flex items-center gap-2 ${visible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4 pointer-events-none'}`}>
                <Icon name="check-circle" className="text-emerald-400" />
                {message}
            </div>
        );

        // --- 1. 복리 계산기 컴포넌트 ---
        const InterestCalculator = () => {
            const [currency, setCurrency] = useState("KRW");
            const [initialInvestment, setInitialInvestment] = useState(""); 
            const [annualRate, setAnnualRate] = useState(""); 
            const [monthlyContribution, setMonthlyContribution] = useState(""); 
            const [years, setYears] = useState(""); 

            const calculationData = useMemo(() => {
                const initInv = Number(initialInvestment) || 0;
                const annRate = Number(annualRate) || 0;
                const monthCont = Number(monthlyContribution) || 0;
                const totalYears = Number(years) || 0;
                if (totalYears <= 0) return [];

                let results = [];
                let currentBalance = initInv;
                let totalContribution = initInv;
                const monthlyRate = annRate / 100 / 12;

                for (let year = 1; year <= totalYears; year++) {
                    let yearlyInterest = 0;
                    for (let month = 1; month <= 12; month++) {
                        const prev = currentBalance;
                        currentBalance = (currentBalance + monthCont) * (1 + monthlyRate);
                        totalContribution += monthCont;
                        yearlyInterest += (currentBalance - prev - monthCont);
                    }
                    results.push({ 
                        year, 
                        balance: Math.round(currentBalance), 
                        totalContribution: Math.round(totalContribution), 
                        totalInterest: Math.round(currentBalance - totalContribution), 
                        yearlyInterest: Math.round(yearlyInterest) 
                    });
                }
                return results;
            }, [initialInvestment, annualRate, monthlyContribution, years]);

            const finalData = calculationData[calculationData.length - 1] || { balance: 0, totalContribution: 0, totalInterest: 0 };
            
            const formatCurrency = (v, useUk = true) => {
                if (currency === "USD") {
                    return "$" + v.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 });
                } else {
                    if (v === 0) return "0 만원";
                    const uk = Math.floor(v / 10000);
                    const rm = v % 10000;
                    if (useUk && uk > 0) {
                        return `${uk.toLocaleString()}억${rm > 0 ? " " + rm.toLocaleString() + " 만원" : ""}`;
                    }
                    return v.toLocaleString() + " 만원";
                }
            };

            return (
                <section className="animate-in fade-in duration-500">
                    <h2 className="text-2xl font-bold text-center mb-8 text-slate-800">복리 계산기</h2>
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-1 bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                            <div className="flex items-center justify-between mb-6">
                                <h3 className="text-xl font-bold flex items-center gap-2 text-slate-800">
                                    <Icon name="settings" className="text-indigo-500" /> 설정
                                </h3>
                                <div className="flex bg-slate-100 p-1 rounded-lg">
                                    <button onClick={() => setCurrency("KRW")} className={`px-3 py-1 rounded text-xs font-bold transition-all ${currency === 'KRW' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500'}`}>
                                        ₩ 원
                                    </button>
                                    <button onClick={() => setCurrency("USD")} className={`px-3 py-1 rounded text-xs font-bold transition-all ${currency === 'USD' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500'}`}>
                                        $ 달러
                                    </button>
                                </div>
                            </div>
                            <div className="space-y-4">
                                {[
                                    { id: "initialInvestment", label: "초기 투자 금액", val: initialInvestment, set: setInitialInvestment, unit: currency === "KRW" ? "만원" : "$", placeholder: currency === "KRW" ? "1,000" : "10,000" },
                                    { id: "annualRate", label: "연 수익률 (%)", val: annualRate, set: setAnnualRate, unit: "%", placeholder: "7", step: "0.1" },
                                    { id: "monthlyContribution", label: "월 추가 적립액", val: monthlyContribution, set: setMonthlyContribution, unit: currency === "KRW" ? "만원" : "$", placeholder: currency === "KRW" ? "50" : "500" },
                                    { id: "years", label: "투자 기간", val: years, set: setYears, unit: "년", placeholder: "10" }
                                ].map((item) => (
                                    <div key={item.id}>
                                        <label htmlFor={item.id} className="text-sm font-medium text-slate-600 mb-1 block">{item.label}</label>
                                        <div className="relative">
                                            <input id={item.id} type="number" step={item.step} value={item.val} onChange={(e) => item.set(e.target.value)} placeholder={item.placeholder} className={`w-full py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none font-semibold ${item.unit === '$' ? 'pl-8 pr-4' : 'pl-4 pr-12 text-right'}`} />
                                            <span className={`absolute top-3.5 text-slate-400 text-sm font-bold ${item.unit === '$' ? 'left-3' : 'right-4'}`}>{item.unit}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className="mt-6 p-4 bg-indigo-50 rounded-2xl border border-indigo-100">
                                <p className="text-xs text-indigo-700 leading-relaxed">
                                    <Icon name="info" size={14} className="inline mr-1 mb-0.5" />
                                    {currency === "KRW" ? "원화는 '만원' 단위를 기준으로 입력해 주세요. (예: 1000 = 1,000만원)" : "달러는 실제 금액을 그대로 입력해 주세요. (예: 1000 = $1,000)"}
                                </p>
                            </div>
                        </div>
                        <div className="lg:col-span-2 space-y-6">
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <SummaryCard title="최종 자산" value={formatCurrency(finalData.balance)} bg="bg-indigo-600 text-white" />
                                <SummaryCard title="총 원금" value={formatCurrency(finalData.totalContribution)} bg="bg-white border border-slate-200 text-slate-800" />
                                <SummaryCard title="총 수익" value={formatCurrency(finalData.totalInterest)} bg="bg-white border border-slate-200 text-emerald-600" />
                            </div>
                            <div className="bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden">
                                <div className="p-5 border-b flex justify-between items-center">
                                    <h3 className="font-bold flex items-center gap-2"><Icon name="list" className="text-indigo-500" /> 연도별 상세 변화</h3>
                                    <span className="text-xs text-indigo-500 bg-indigo-50 px-2 py-1 rounded">단위: {currency === "KRW" ? "만원" : "USD ($)"}</span>
                                </div>
                                <div className="overflow-x-auto max-h-[400px]">
                                    <table className="w-full text-left text-sm">
                                        <thead className="bg-slate-50 sticky top-0 z-10">
                                            <tr>
                                                <th className="px-6 py-4 font-bold text-slate-600">연차</th>
                                                <th className="px-6 py-4 font-bold text-slate-600 text-right">연 이자</th>
                                                <th className="px-6 py-4 font-bold text-slate-600 text-right">기말 잔액</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100">
                                            {calculationData.length > 0 ? calculationData.map((r) => (
                                                <tr key={r.year} className="hover:bg-slate-50 transition-colors">
                                                    <td className="px-6 py-4 font-bold text-indigo-600">{r.year}년차</td>
                                                    <td className="px-6 py-4 text-emerald-600 text-right">+{formatCurrency(r.yearlyInterest, false)}</td>
                                                    <td className="px-6 py-4 text-right font-bold">{formatCurrency(r.balance, false)}</td>
                                                </tr>
                                            )) : <tr><td colSpan="3" className="px-6 py-20 text-center text-slate-400">데이터를 입력하면 결과가 표시됩니다.</td></tr>}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const SummaryCard = ({ title, value, bg }) => (
            <div className={`${bg} p-6 rounded-3xl shadow-sm transition-transform hover:scale-[1.02]`}>
                <p className="text-sm opacity-80 mb-1">{title}</p>
                <p className="text-2xl font-bold">{value}</p>
            </div>
        );

        // --- 2. 랜덤 팀 생성기 컴포넌트 ---
        const TeamGenerator = ({ onCopy }) => {
            const [totalPeople, setTotalPeople] = useState("");
            const [numTeams, setNumTeams] = useState("");
            const [teams, setTeams] = useState([]);
            const [revealed, setRevealed] = useState([]);

            const generateTeams = () => {
                const count = parseInt(totalPeople);
                const groupCount = parseInt(numTeams);

                if (isNaN(count) || isNaN(groupCount) || count <= 0 || groupCount <= 0) return;
                if (groupCount > count) {
                    alert("조 개수가 전체 인원보다 많을 수 없습니다.");
                    return;
                }

                let people = Array.from({ length: count }, (_, i) => i + 1);
                for (let i = people.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [people[i], people[j]] = [people[j], people[i]];
                }

                const newTeams = Array.from({ length: groupCount }, () => []);
                people.forEach((person, idx) => {
                    newTeams[idx % groupCount].push(person);
                });

                setTeams(newTeams);
                setRevealed(new Array(groupCount).fill(false));
            };

            const toggleReveal = (idx) => setRevealed(prev => prev.map((r, i) => i === idx ? true : r));
            const revealAll = () => setRevealed(new Array(teams.length).fill(true));
            const handleReset = () => { setTotalPeople(""); setNumTeams(""); setTeams([]); setRevealed([]); };

            const handleCopy = () => {
                if (teams.length === 0) return;
                const text = teams.map((t, i) => `[${i + 1}조]: ${t.join(", ")}번`).join("\n");
                navigator.clipboard.writeText(text).then(() => {
                    onCopy("팀 편성 결과가 클립보드에 복사되었습니다!");
                });
            };

            return (
                <section className="animate-in fade-in slide-in-from-bottom-4 duration-500">
                    <h2 className="text-2xl font-bold text-center mb-8 text-slate-800">팀 편성기</h2>
                    <div className="max-w-4xl mx-auto space-y-8">
                        <div className="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <div>
                                    <label htmlFor="totalPeople" className="text-sm font-medium text-slate-600 mb-2 block">전체 인원 수 (명)</label>
                                    <input id="totalPeople" type="number" value={totalPeople} onChange={(e) => setTotalPeople(e.target.value)} placeholder="예: 20" className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none font-bold" />
                                </div>
                                <div>
                                    <label htmlFor="numTeams" className="text-sm font-medium text-slate-600 mb-2 block">나눌 조 개수 (개)</label>
                                    <input id="numTeams" type="number" value={numTeams} onChange={(e) => setNumTeams(e.target.value)} placeholder="예: 4" className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none font-bold" />
                                </div>
                            </div>
                            <div className="flex flex-wrap gap-3">
                                <button onClick={generateTeams} className="flex-1 bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-purple-100">
                                    <Icon name="shuffle" size={18} /> 팀 편성하기
                                </button>
                                <button onClick={handleReset} className="px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-xl font-bold transition-all">
                                    초기화
                                </button>
                            </div>
                        </div>

                        {teams.length > 0 && (
                            <article className="space-y-6">
                                <div className="flex justify-between items-center px-2">
                                    <h3 className="text-lg font-bold text-slate-800">편성 결과</h3>
                                    <div className="flex gap-2">
                                        <button onClick={revealAll} className="text-sm font-bold text-purple-600 bg-purple-50 px-4 py-2 rounded-lg hover:bg-purple-100 transition-colors">모두 공개</button>
                                        <button onClick={handleCopy} className="text-sm font-bold text-slate-600 bg-white border border-slate-200 px-4 py-2 rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-1">
                                            <Icon name="copy" size={14} /> 복사
                                        </button>
                                    </div>
                                </div>
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                    {teams.map((team, idx) => (
                                        <div key={idx} className="relative bg-white rounded-2xl border border-slate-200 h-40 overflow-hidden shadow-sm group">
                                            <div className="p-5 h-full flex flex-col items-center justify-center">
                                                <h4 className="text-xs font-bold text-purple-500 mb-2 uppercase tracking-wider">{idx + 1}조 팀원</h4>
                                                <div className="flex flex-wrap justify-center gap-2 overflow-y-auto max-h-24 py-1">
                                                    {team.map(p => <span key={p} className="bg-slate-100 text-slate-700 w-9 h-9 flex items-center justify-center rounded-full text-sm font-bold">{p}</span>)}
                                                </div>
                                            </div>
                                            <div onClick={() => toggleReveal(idx)} className={`reveal-overlay absolute inset-0 bg-gradient-to-br from-purple-600 to-indigo-700 flex flex-col items-center justify-center text-white cursor-pointer z-10 ${revealed[idx] ? 'hidden-box' : ''}`}>
                                                <Icon name="gift" size={36} className="mb-2 animate-bounce" />
                                                <span className="text-sm font-bold opacity-90">{idx + 1}조 확인하기</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </article>
                        )}
                    </div>
                </section>
            );
        };

        // --- 3. 메인 앱 컴포넌트 ---
        const App = () => {
            const [activeTab, setActiveTab] = useState("calc");
            const [toast, setToast] = useState({ msg: "", visible: false });

            const showToast = (msg) => {
                setToast({ msg, visible: true });
                setTimeout(() => setToast({ msg: "", visible: false }), 2500);
            };

            return (
                <>
                    <header className="sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-slate-200">
                        <nav className="max-w-6xl mx-auto px-4">
                            <div className="flex items-center justify-between h-16">
                                <h1 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                                    <a href="/" className="flex items-center gap-2">
                                        <div className="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white">
                                            <Icon name="layout-grid" size={18} />
                                        </div>
                                        Multitoolkit
                                    </a>
                                </h1>
                                <div className="flex gap-1 bg-slate-100 p-1 rounded-xl">
                                    <button onClick={() => setActiveTab("calc")} className={`px-4 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'calc' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}>
                                        복리 계산기
                                    </button>
                                    <button onClick={() => setActiveTab("team")} className={`px-4 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'team' ? 'bg-white text-purple-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}>
                                        팀 편성기
                                    </button>
                                </div>
                            </div>
                        </nav>
                    </header>

                    <main className="max-w-6xl mx-auto px-4 pt-8 md:pt-12">
                        {activeTab === "calc" ? <InterestCalculator /> : <TeamGenerator onCopy={showToast} />}
                    </main>

                    <Toast message={toast.msg} visible={toast.visible} />
                    
                    <footer className="mt-20 text-center text-slate-400 text-xs pb-10">
                        &copy; 2024 Multitoolkit. All rights reserved.
                    </footer>
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
